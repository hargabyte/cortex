<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cortex - Interactive Playground</title>
  <style>
    :root { --bg-primary: #f8f9fa; --bg-secondary: #fff; --text-primary: #333; --text-secondary: #666; --accent-blue: #3498db; --accent-green: #2ecc71; --border-color: #e5e7eb; }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: var(--bg-primary); display: flex; height: 100vh; overflow: hidden; }
    .controls { width: 300px; background: var(--bg-secondary); border-right: 1px solid var(--border-color); padding: 1rem; overflow-y: auto; display: flex; flex-direction: column; gap: 1.25rem; }
    .controls h2 { font-size: 1.1rem; color: var(--accent-blue); margin-bottom: 0.5rem; padding-bottom: 0.5rem; border-bottom: 2px solid var(--border-color); }
    .control-group h3 { font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.5px; color: var(--text-secondary); margin-bottom: 0.5rem; }
    .preset-buttons { display: flex; flex-wrap: wrap; gap: 0.5rem; }
    .preset-btn { padding: 0.5rem 0.75rem; border: 1px solid var(--border-color); border-radius: 6px; background: var(--bg-primary); cursor: pointer; font-size: 0.85rem; }
    .preset-btn:hover { border-color: var(--accent-blue); background: #e3f2fd; }
    .preset-btn.active { border-color: var(--accent-blue); background: var(--accent-blue); color: white; }
    .toggle-item { display: flex; align-items: center; gap: 0.5rem; padding: 0.4rem 0.5rem; border-radius: 4px; cursor: pointer; }
    .toggle-item:hover { background: var(--bg-primary); }
    .toggle-color { width: 12px; height: 12px; border-radius: 2px; }
    .toggle-label { flex: 1; font-size: 0.9rem; }
    .toggle-count { font-size: 0.75rem; color: var(--text-secondary); background: var(--bg-primary); padding: 0.1rem 0.4rem; border-radius: 10px; }
    .canvas-container { flex: 1; position: relative; overflow: hidden; background: linear-gradient(135deg, #fafafa 0%, #f0f0f0 100%); }
    .canvas-header { position: absolute; top: 0; left: 0; right: 0; padding: 1rem; background: rgba(255,255,255,0.95); border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center; z-index: 10; }
    .search-box input { padding: 0.5rem 1rem; border: 1px solid var(--border-color); border-radius: 6px; width: 250px; }
    .stats-row { display: flex; gap: 1.5rem; }
    .stat-item { text-align: center; }
    .stat-value { font-size: 1.5rem; font-weight: 700; color: var(--accent-blue); }
    .stat-label { font-size: 0.7rem; color: var(--text-secondary); text-transform: uppercase; }
    .keystones-list { padding: 5rem 1rem 1rem; height: 100%; overflow-y: auto; }
    .keystone-card { background: white; border: 1px solid var(--border-color); border-radius: 8px; padding: 1rem; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.2s; }
    .keystone-card:hover { border-color: var(--accent-blue); box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
    .keystone-card.selected { border-color: var(--accent-blue); background: #f0f7ff; }
    .keystone-name { font-weight: 600; font-size: 1rem; color: var(--accent-blue); }
    .keystone-meta { display: flex; gap: 0.5rem; margin-top: 0.5rem; flex-wrap: wrap; }
    .keystone-badge { font-size: 0.7rem; padding: 0.15rem 0.5rem; border-radius: 4px; background: var(--bg-primary); }
    .keystone-badge.keystone { background: #fff3e0; color: #e65100; }
    .keystone-badge.function { background: #e3f2fd; color: #1565c0; }
    .keystone-badge.method { background: #f3e5f5; color: #7b1fa2; }
    .keystone-badge.type { background: #e8f5e9; color: #2e7d32; }
    .entity-panel { position: absolute; bottom: 0; left: 0; right: 0; background: var(--bg-secondary); border-top: 1px solid var(--border-color); padding: 1.5rem; transform: translateY(100%); transition: transform 0.3s ease; max-height: 50%; overflow-y: auto; z-index: 20; }
    .entity-panel.visible { transform: translateY(0); }
    .entity-panel-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; }
    .entity-panel h2 { font-size: 1.25rem; color: var(--accent-blue); }
    .close-btn { background: none; border: none; font-size: 1.5rem; cursor: pointer; color: var(--text-secondary); }
    .entity-details { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; }
    .detail-item { background: var(--bg-primary); padding: 0.75rem; border-radius: 6px; }
    .detail-label { font-size: 0.75rem; text-transform: uppercase; color: var(--text-secondary); margin-bottom: 0.25rem; }
    .detail-value { font-weight: 500; }
    .detail-value code { background: #e3e3e3; padding: 0.1rem 0.3rem; border-radius: 3px; font-size: 0.85rem; }
    .prompt-section { margin-top: auto; padding-top: 1rem; border-top: 1px solid var(--border-color); }
    .prompt-section textarea { width: 100%; height: 100px; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 6px; font-family: monospace; font-size: 0.8rem; resize: none; margin-bottom: 0.5rem; }
    .btn-primary { width: 100%; padding: 0.75rem; background: var(--accent-blue); color: white; border: none; border-radius: 6px; cursor: pointer; }
    .btn-primary:hover { background: #2980b9; }
    .comment-btn { margin-top: 1rem; padding: 0.5rem 1rem; background: var(--accent-green); color: white; border: none; border-radius: 6px; cursor: pointer; }
  </style>
</head>
<body>
  <div class="controls">
    <h2>üèóÔ∏è Cortex Playground</h2>
    <div class="control-group"><h3>View Presets</h3><div class="preset-buttons" id="presets"></div></div>
    <div class="control-group"><h3>Layers</h3><div id="layers"></div></div>
    <div class="control-group"><h3>Connections</h3><div id="connections"></div></div>
    <div class="prompt-section">
      <h3 style="font-size: 0.75rem; text-transform: uppercase; color: #666; margin-bottom: 0.5rem;">Prompt Output</h3>
      <textarea id="prompt-output" readonly placeholder="Select entities and add comments..."></textarea>
      <button class="btn-primary" onclick="copyPrompt()">üìã Copy Prompt</button>
    </div>
  </div>
  <div class="canvas-container">
    <div class="canvas-header">
      <div class="search-box"><input type="text" id="search" placeholder="Search entities..." oninput="handleSearch()"></div>
      <div class="stats-row">
        <div class="stat-item"><div class="stat-value" id="total-entities">0</div><div class="stat-label">Keystones</div></div>
        <div class="stat-item"><div class="stat-value" id="visible-entities">0</div><div class="stat-label">Visible</div></div>
      </div>
    </div>
    <div class="keystones-list" id="keystones-list"></div>
    <div class="entity-panel" id="entity-panel">
      <div class="entity-panel-header">
        <h2 id="panel-entity-name">Entity</h2>
        <button class="close-btn" onclick="closePanel()">√ó</button>
      </div>
      <div class="entity-details" id="entity-details"></div>
      <button class="comment-btn" onclick="addComment()">üí¨ Add Comment</button>
    </div>
  </div>
  <script>
    const reportData = {
  "report": {
    "type": "overview",
    "generated_at": "2026-01-30 21:06:05.498107+00:00"
  },
  "metadata": {
    "language_breakdown": {
      "go": 3608,
      "python": 151,
      "typescript": 10
    },
    "total_entities": 3809,
    "active_entities": 3769,
    "archived_entities": 40
  },
  "statistics": {
    "by_type": {
      "constant": 132,
      "function": 746,
      "method": 945,
      "type": 297,
      "variable": 1029
    },
    "by_language": {
      "go": 3608,
      "python": 151,
      "typescript": 10
    }
  },
  "keystones": [
    {
      "id": "sa-fn-d1655fd7-189-walkNode",
      "name": "walkNode",
      "entity_type": "function",
      "file": "internal/parser/parser.go",
      "lines": [
        189,
        199
      ],
      "signature": "(node: *sitter.Node, visitor: func(*sitter.Node) bool) -> bool",
      "importance": "keystone",
      "pagerank": 0.034345211853781116,
      "coverage": -1,
      "doc_comment": "// walkNode is a helper for depth-first AST traversal.",
      "in_degree": 118,
      "layer": "parser",
      "css_classes": "layer-parser entity-function importance-keystone"
    },
    {
      "id": "sa-type-54bbffe9-17-Store",
      "name": "Store",
      "entity_type": "type",
      "file": "internal/store/db.go",
      "lines": [
        17,
        20
      ],
      "signature": "()",
      "importance": "keystone",
      "pagerank": 0.023398986733187566,
      "coverage": -1,
      "doc_comment": "// Store manages the .cx/cortex/ Dolt database for storing application state\n// and metadata with version control capabilities.",
      "in_degree": 171,
      "layer": "store",
      "css_classes": "layer-store entity-type importance-keystone"
    },
    {
      "id": "sa-fn-71e0bf00-1227-nodeText",
      "name": "nodeText",
      "entity_type": "method",
      "file": "internal/extract/typescript.go",
      "lines": [
        1227,
        1229
      ],
      "signature": "(node: *sitter.Node) -> string",
      "importance": "keystone",
      "pagerank": 0.02337063183903313,
      "coverage": -1,
      "doc_comment": "// nodeText returns the source text for a node.",
      "in_degree": 502,
      "layer": "core",
      "css_classes": "layer-core entity-method importance-keystone"
    },
    {
      "id": "sa-fn-54bbffe9-84-Close",
      "name": "Close",
      "entity_type": "method",
      "file": "internal/store/db.go",
      "lines": [
        84,
        89
      ],
      "signature": "() -> error",
      "importance": "keystone",
      "pagerank": 0.02193511462944736,
      "coverage": -1,
      "doc_comment": "// Close closes the database connection.",
      "in_degree": 244,
      "layer": "store",
      "css_classes": "layer-store entity-method importance-keystone"
    },
    {
      "id": "sa-type-d1655fd7-52-ParseResult",
      "name": "ParseResult",
      "entity_type": "type",
      "file": "internal/parser/parser.go",
      "lines": [
        52,
        63
      ],
      "signature": "()",
      "importance": "keystone",
      "pagerank": 0.021147124962808145,
      "coverage": -1,
      "doc_comment": "// ParseResult contains the parsed AST and metadata.",
      "in_degree": 53,
      "layer": "parser",
      "css_classes": "layer-parser entity-type importance-keystone"
    },
    {
      "id": "sa-type-bf4da8db-6-Entity",
      "name": "Entity",
      "entity_type": "type",
      "file": "internal/store/types.go",
      "lines": [
        6,
        27
      ],
      "signature": "()",
      "importance": "keystone",
      "pagerank": 0.01569073510827062,
      "coverage": -1,
      "doc_comment": "// Entity represents a code entity (function, type, constant, etc.)",
      "in_degree": 280,
      "layer": "store",
      "css_classes": "layer-store entity-type importance-keystone"
    },
    {
      "id": "sa-fn-d1655fd7-221-NodeText",
      "name": "NodeText",
      "entity_type": "method",
      "file": "internal/parser/parser.go",
      "lines": [
        221,
        226
      ],
      "signature": "(node: *sitter.Node) -> string",
      "importance": "keystone",
      "pagerank": 0.014978434996581632,
      "coverage": -1,
      "doc_comment": "// NodeText returns the source text for a node.",
      "in_degree": 24,
      "layer": "parser",
      "css_classes": "layer-parser entity-method importance-keystone"
    },
    {
      "id": "sa-type-19f293f2-71-Density",
      "name": "Density",
      "entity_type": "type",
      "file": "internal/output/format.go",
      "lines": [
        71,
        71
      ],
      "signature": "()",
      "importance": "keystone",
      "pagerank": 0.012881480046349106,
      "coverage": -1,
      "doc_comment": "// Density represents the level of detail in output.\n// Different density levels optimize for different use cases:\n//   - Sparse: Minimal tokens for \"find where\" queries\n//   - Medium: Balanced detail for most use cases (default)\n//   - Dense: Full detail including hashes, metrics, timestamps\n//   - Smart: Importance-based density (keystones expanded, leaves compact)",
      "in_degree": 34,
      "layer": "output",
      "css_classes": "layer-output entity-type importance-keystone"
    },
    {
      "id": "sa-type-71e0bf00-12-TypeScriptExtractor",
      "name": "TypeScriptExtractor",
      "entity_type": "type",
      "file": "internal/extract/typescript.go",
      "lines": [
        12,
        16
      ],
      "signature": "()",
      "importance": "keystone",
      "pagerank": 0.012681936086457445,
      "coverage": -1,
      "doc_comment": "// TypeScriptExtractor extracts code entities from TypeScript/JavaScript AST.",
      "in_degree": 43,
      "layer": "core",
      "css_classes": "layer-core entity-type importance-keystone"
    },
    {
      "id": "sa-fn-89d04249-115-Client",
      "name": "Client",
      "entity_type": "method",
      "file": "internal/daemon/storeproxy.go",
      "lines": [
        115,
        117
      ],
      "signature": "() -> *Client",
      "importance": "keystone",
      "pagerank": 0.010236277239846558,
      "coverage": -1,
      "doc_comment": "// Client returns the daemon client.\n// Returns nil if using direct mode.",
      "in_degree": 46,
      "layer": "core",
      "css_classes": "layer-core entity-method importance-keystone"
    },
    {
      "id": "sa-fn-19f293f2-112-String",
      "name": "String",
      "entity_type": "method",
      "file": "internal/output/format.go",
      "lines": [
        112,
        114
      ],
      "signature": "() -> string",
      "importance": "bottleneck",
      "pagerank": 0.009898418757687922,
      "coverage": -1,
      "doc_comment": "// String returns the string representation of the density.",
      "in_degree": 114,
      "layer": "output",
      "css_classes": "layer-output entity-method importance-bottleneck"
    },
    {
      "id": "sa-const-26106598-34-Contains",
      "name": "Contains",
      "entity_type": "constant",
      "file": "internal/extract/callgraph.go",
      "lines": [
        34,
        34
      ],
      "signature": "()",
      "importance": "bottleneck",
      "pagerank": 0.007506090311751593,
      "coverage": -1,
      "doc_comment": "// Contains represents a module containing a function/type",
      "in_degree": 104,
      "layer": "core",
      "css_classes": "layer-core entity-constant importance-bottleneck"
    },
    {
      "id": "sa-type-e4194d0c-15-TypeScriptCallGraphExtractor",
      "name": "TypeScriptCallGraphExtractor",
      "entity_type": "type",
      "file": "internal/extract/callgraph_typescript.go",
      "lines": [
        15,
        20
      ],
      "signature": "()",
      "importance": "bottleneck",
      "pagerank": 0.005433073779001616,
      "coverage": -1,
      "doc_comment": "// TypeScriptCallGraphExtractor extracts dependencies from TypeScript/JavaScript AST",
      "in_degree": 19,
      "layer": "core",
      "css_classes": "layer-core entity-type importance-bottleneck"
    },
    {
      "id": "sa-type-89d04249-15-StoreProvider",
      "name": "StoreProvider",
      "entity_type": "type",
      "file": "internal/daemon/storeproxy.go",
      "lines": [
        15,
        27
      ],
      "signature": "()",
      "importance": "normal",
      "pagerank": 0.005392453066583038,
      "coverage": -1,
      "doc_comment": "// StoreProvider provides access to the code graph store.\n// It abstracts whether access is via daemon or direct database.",
      "in_degree": 8,
      "layer": "core",
      "css_classes": "layer-core entity-type importance-normal"
    },
    {
      "id": "sa-type-a918a3cf-8-Graph",
      "name": "Graph",
      "entity_type": "type",
      "file": "internal/graph/graph.go",
      "lines": [
        8,
        13
      ],
      "signature": "()",
      "importance": "bottleneck",
      "pagerank": 0.005094940831528421,
      "coverage": -1,
      "doc_comment": "// Graph represents an in-memory dependency graph.",
      "in_degree": 38,
      "layer": "graph",
      "css_classes": "layer-graph entity-type importance-bottleneck"
    },
    {
      "id": "sa-type-6ffd4115-30-CGFWriter",
      "name": "CGFWriter",
      "entity_type": "type",
      "file": "internal/output/cgf_writer.go",
      "lines": [
        30,
        34
      ],
      "signature": "()",
      "importance": "bottleneck",
      "pagerank": 0.004710585753452473,
      "coverage": -1,
      "doc_comment": "// CGFWriter outputs CGF format to an io.Writer (DEPRECATED)\n// DEPRECATED: Use YAMLFormatter or JSONFormatter instead.",
      "in_degree": 30,
      "layer": "output",
      "css_classes": "layer-output entity-type importance-bottleneck"
    },
    {
      "id": "sa-fn-e7edeebf-764-itoa",
      "name": "itoa",
      "entity_type": "function",
      "file": "internal/extract/callgraph_java.go",
      "lines": [
        764,
        777
      ],
      "signature": "(n: int) -> string",
      "importance": "normal",
      "pagerank": 0.004648414555550264,
      "coverage": -1,
      "doc_comment": "// itoa is a simple int to string conversion to avoid importing strconv",
      "in_degree": 6,
      "layer": "core",
      "css_classes": "layer-core entity-function importance-normal"
    },
    {
      "id": "sa-fn-d1655fd7-214-FindNodesByType",
      "name": "FindNodesByType",
      "entity_type": "method",
      "file": "internal/parser/parser.go",
      "lines": [
        214,
        218
      ],
      "signature": "(nodeType: string) -> []*sitter.Node",
      "importance": "bottleneck",
      "pagerank": 0.00462541992700867,
      "coverage": -1,
      "doc_comment": "// FindNodesByType returns all nodes of the specified type.",
      "in_degree": 148,
      "layer": "parser",
      "css_classes": "layer-parser entity-method importance-bottleneck"
    },
    {
      "id": "sa-fn-3f85b170-281-Format",
      "name": "Format",
      "entity_type": "method",
      "file": "internal/output/formatter.go",
      "lines": [
        281,
        289
      ],
      "signature": "(entity: interface{}, density: Density) -> (string, error)",
      "importance": "bottleneck",
      "pagerank": 0.004604577586302156,
      "coverage": -1,
      "doc_comment": "// Format formats an entity as CGF (deprecated).",
      "in_degree": 60,
      "layer": "output",
      "css_classes": "layer-output entity-method importance-bottleneck"
    },
    {
      "id": "sa-fn-d1655fd7-113-Parse",
      "name": "Parse",
      "entity_type": "method",
      "file": "internal/parser/parser.go",
      "lines": [
        113,
        127
      ],
      "signature": "(source: []byte) -> (*ParseResult, error)",
      "importance": "bottleneck",
      "pagerank": 0.004191244137674597,
      "coverage": -1,
      "doc_comment": "// Parse parses source code and returns the AST.",
      "in_degree": 54,
      "layer": "parser",
      "css_classes": "layer-parser entity-method importance-bottleneck"
    }
  ],
  "modules": [
    {
      "path": "internal/extract",
      "entities": 1251,
      "functions": 695,
      "types": 37
    },
    {
      "path": "internal/cmd",
      "entities": 881,
      "functions": 280,
      "types": 63
    },
    {
      "path": "internal/store",
      "entities": 238,
      "functions": 91,
      "types": 17
    },
    {
      "path": "internal/coverage",
      "entities": 217,
      "functions": 83,
      "types": 26
    },
    {
      "path": "internal/output",
      "entities": 206,
      "functions": 92,
      "types": 46
    },
    {
      "path": "internal/parser",
      "entities": 122,
      "functions": 63,
      "types": 6
    },
    {
      "path": "internal/daemon",
      "entities": 117,
      "functions": 64,
      "types": 13
    },
    {
      "path": "internal/graph",
      "entities": 103,
      "functions": 52,
      "types": 11
    },
    {
      "path": "internal/diff",
      "entities": 85,
      "functions": 27,
      "types": 15
    },
    {
      "path": "internal/bd",
      "entities": 73,
      "functions": 34,
      "types": 9
    },
    {
      "path": "internal/cache",
      "entities": 61,
      "functions": 32,
      "types": 4
    },
    {
      "path": "internal/mcp",
      "entities": 50,
      "functions": 30,
      "types": 2
    },
    {
      "path": "internal/metrics",
      "entities": 50,
      "functions": 30,
      "types": 8
    },
    {
      "path": "internal/integration",
      "entities": 41,
      "functions": 14,
      "types": 7
    },
    {
      "path": "internal/context",
      "entities": 37,
      "functions": 15,
      "types": 8
    },
    {
      "path": "../../../tmp/py-test-repo/ch10-primer-on-oop",
      "entities": 35,
      "functions": 24,
      "types": 11
    },
    {
      "path": "internal/semdiff",
      "entities": 34,
      "functions": 12,
      "types": 5
    },
    {
      "path": "internal/config",
      "entities": 32,
      "functions": 15,
      "types": 6
    },
    {
      "path": "../../../tmp/py-test-repo/ch08-conditional-logic",
      "entities": 27,
      "functions": 7,
      "types": 0
    },
    {
      "path": "../../../tmp/py-test-repo/ch14-interact-with-pdf-files",
      "entities": 26,
      "functions": 4,
      "types": 1
    }
  ],
  "diagrams": {
    "architecture": {
      "title": "System Architecture",
      "d2": "vars: {\n  d2-config: {\n    theme-id: 8\n    layout-engine: elk\n  }\n}\n\ntitle: {\n  label: \"System Architecture\"\n  near: top-center\n  style: {\n    font-size: 24\n    bold: true\n  }\n}\n\ndirection: right\n\n# Module Layers\n\"internal/bd\": {\n  label: \"bd\"\n  style: {\n    fill: \"#e3f2fd\"\n    stroke: \"#1565c0\"\n    stroke-width: 2\n    border-radius: 8\n  }\n  sa-fn-898f819e-34-execBD: {\n    label: \"execBD\"\n    shape: rectangle\n    style: {\n      fill: \"#fff8e1\"\n      stroke: \"#ff8f00\"\n      stroke-width: 2\n      border-radius: 4\n      font-size: 14\n    }\n  }\n}\n\n\"internal/cache\": {\n  label: \"cache\"\n  style: {\n    fill: \"#f3e5f5\"\n    stroke: \"#6a1b9a\"\n    stroke-width: 2\n    border-radius: 8\n  }\n  sa-type-113f0a3d-16-Cache: {\n    label: \"Cache\"\n    shape: hexagon\n    style: {\n      fill: \"#fff8e1\"\n      stroke: \"#ff8f00\"\n      stroke-width: 2\n      border-radius: 4\n      font-size: 14\n    }\n  }\n}\n\n\"internal/cmd\": {\n  label: \"cmd\"\n  style: {\n    fill: \"#e3f2fd\"\n    stroke: \"#1565c0\"\n    stroke-width: 2\n    border-radius: 8\n  }\n  sa-fn-4a72a17f-78-Execute: {\n    label: \"Execute\"\n    shape: rectangle\n    style: {\n      fill: \"#e3f2fd\"\n      stroke: \"#1976d2\"\n      stroke-width: 1\n      border-radius: 4\n      font-size: 14\n    }\n  }\n}\n\n\"internal/config\": {\n  label: \"config\"\n  style: {\n    fill: \"#e3f2fd\"\n    stroke: \"#1565c0\"\n    stroke-width: 2\n    border-radius: 8\n  }\n  sa-fn-54c7c1af-109-FindConfigDir: {\n    label: \"FindConfigDir\"\n    shape: rectangle\n    style: {\n      fill: \"#fff8e1\"\n      stroke: \"#ff8f00\"\n      stroke-width: 2\n      border-radius: 4\n      font-size: 14\n    }\n  }\n}\n\n\"internal/daemon\": {\n  label: \"daemon\"\n  style: {\n    fill: \"#e3f2fd\"\n    stroke: \"#1565c0\"\n    stroke-width: 2\n    border-radius: 8\n  }\n  sa-fn-1ae3e12f-300-Query: {\n    label: \"Query\"\n    shape: rectangle\n    style: {\n      fill: \"#fff8e1\"\n      stroke: \"#ff8f00\"\n      stroke-width: 2\n      border-radius: 4\n      font-size: 14\n    }\n  }\n  sa-fn-89d04249-115-Client: {\n    label: \"Client\"\n    shape: rectangle\n    style: {\n      fill: \"#fff3e0\"\n      stroke: \"#e65100\"\n      stroke-width: 3\n      border-radius: 4\n      shadow: true\n      font-size: 14\n    }\n  }\n  sa-type-59dd6a2f-120-Daemon: {\n    label: \"Daemon\"\n    shape: hexagon\n    style: {\n      fill: \"#fff8e1\"\n      stroke: \"#ff8f00\"\n      stroke-width: 2\n      border-radius: 4\n      font-size: 14\n    }\n  }\n  sa-type-89d04249-15-StoreProvider: {\n    label: \"StoreProvider\"\n    shape: hexagon\n    style: {\n      fill: \"#f3e5f5\"\n      stroke: \"#7b1fa2\"\n      stroke-width: 1\n      border-radius: 4\n      font-size: 14\n    }\n  }\n}\n\n\"internal/extract\": {\n  label: \"extract\"\n  style: {\n    fill: \"#f3e5f5\"\n    stroke: \"#6a1b9a\"\n    stroke-width: 2\n    border-radius: 8\n  }\n  sa-const-26106598-34-Contains: {\n    label: \"Contains\"\n    shape: oval\n    style: {\n      fill: \"#fff8e1\"\n      stroke: \"#ff8f00\"\n      stroke-width: 2\n      border-radius: 4\n      font-size: 14\n    }\n  }\n  sa-fn-0ba4e74f-315-abbreviateType: {\n    label: \"abbreviateType\"\n    shape: rectangle\n    style: {\n      fill: \"#e3f2fd\"\n      stroke: \"#1976d2\"\n      stroke-width: 1\n      border-radius: 4\n      font-size: 14\n    }\n  }\n  sa-fn-71e0bf00-1216-getFilePath: {\n    label: \"getFilePath\"\n    shape: rectangle\n    style: {\n      fill: \"#fff8e1\"\n      stroke: \"#ff8f00\"\n      stroke-width: 2\n      border-radius: 4\n      font-size: 14\n    }\n  }\n  sa-fn-71e0bf00-1227-nodeText: {\n    label: \"nodeText\"\n    shape: rectangle\n    style: {\n      fill: \"#fff3e0\"\n      stroke: \"#e65100\"\n      stroke-width: 3\n      border-radius: 4\n      shadow: true\n      font-size: 14\n    }\n  }\n  sa-fn-748715a3-165-findChildByType: {\n    label: \"findChildByType\"\n    shape: rectangle\n    style: {\n      fill: \"#fff8e1\"\n      stroke: \"#ff8f00\"\n      stroke-width: 2\n      border-radius: 4\n      font-size: 14\n    }\n  }\n  sa-fn-836fe4f1-434-ComputeHashes: {\n    label: \"ComputeHashes\"\n    shape: rectangle\n    style: {\n      fill: \"#fff8e1\"\n      stroke: \"#ff8f00\"\n      stroke-width: 2\n      border-radius: 4\n      font-size: 14\n    }\n  }\n  sa-fn-836fe4f1-534-NormalizePath: {\n    label: \"NormalizePath\"\n    shape: rectangle\n    style: {\n      fill: \"#fff8e1\"\n      stroke: \"#ff8f00\"\n      stroke-width: 2\n      border-radius: 4\n      font-size: 14\n    }\n  }\n  sa-fn-9763a4f7-890-phpItoa: {\n    label: \"phpItoa\"\n    shape: rectangle\n    style: {\n      fill: \"#e3f2fd\"\n      stroke: \"#1976d2\"\n      stroke-width: 1\n      border-radius: 4\n      font-size: 14\n    }\n  }\n  sa-fn-e4194d0c-677-resolveTarget: {\n    label: \"resolveTarget\"\n    shape: rectangle\n    style: {\n      fill: \"#fff8e1\"\n      stroke: \"#ff8f00\"\n      stroke-width: 2\n      border-radius: 4\n      font-size: 14\n    }\n  }\n  sa-fn-e7edeebf-764-itoa: {\n    label: \"itoa\"\n    shape: rectangle\n    style: {\n      fill: \"#e3f2fd\"\n      stroke: \"#1976d2\"\n      stroke-width: 1\n      border-radius: 4\n      font-size: 14\n    }\n  }\n  sa-type-26106598-67-CallGraphEntity: {\n    label: \"CallGraphEntity\"\n    shape: hexagon\n    style: {\n      fill: \"#fff8e1\"\n      stroke: \"#ff8f00\"\n      stroke-width: 2\n      border-radius: 4\n      font-size: 14\n    }\n  }\n  sa-type-3bd9f310-12-RustExtractor: {\n    label: \"RustExtractor\"\n    shape: hexagon\n    style: {\n      fill: \"#fff8e1\"\n      stroke: \"#ff8f00\"\n      stroke-width: 2\n      border-radius: 4\n      font-size: 14\n    }\n  }\n  sa-type-61894326-12-CppExtractor: {\n    label: \"CppExtractor\"\n    shape: hexagon\n    style: {\n      fill: \"#fff8e1\"\n      stroke: \"#ff8f00\"\n      stroke-width: 2\n      border-radius: 4\n      font-size: 14\n    }\n  }\n  sa-type-71e0bf00-12-TypeScriptExtractor: {\n    label: \"TypeScriptExtractor\"\n    shape: hexagon\n    style: {\n      fill: \"#fff3e0\"\n      stroke: \"#e65100\"\n      stroke-width: 3\n      border-radius: 4\n      shadow: true\n      font-size: 14\n    }\n  }\n  sa-type-836fe4f1-51-Visibility: {\n    label: \"Visibility\"\n    shape: hexagon\n    style: {\n      fill: \"#fff8e1\"\n      stroke: \"#ff8f00\"\n      stroke-width: 2\n      border-radius: 4\n      font-size: 14\n    }\n  }\n  sa-type-89a25908-11-KotlinExtractor: {\n    label: \"KotlinExtractor\"\n    shape: hexagon\n    style: {\n      fill: \"#fff8e1\"\n      stroke: \"#ff8f00\"\n      stroke-width: 2\n      border-radius: 4\n      font-size: 14\n    }\n  }\n  sa-type-9763a4f7-13-PHPCallGraphExtractor: {\n    label: \"PHPCallGraphExtractor\"\n    shape: hexagon\n    style: {\n      fill: \"#fff8e1\"\n      stroke: \"#ff8f00\"\n      stroke-width: 2\n      border-radius: 4\n      font-size: 14\n    }\n  }\n  sa-type-ca134818-11-PHPExtractor: {\n    label: \"PHPExtractor\"\n    shape: hexagon\n    style: {\n      fill: \"#fff8e1\"\n      stroke: \"#ff8f00\"\n      stroke-width: 2\n      border-radius: 4\n      font-size: 14\n    }\n  }\n  sa-type-e4194d0c-15-TypeScriptCallGraphExtractor: {\n    label: \"TypeScriptCallGraphExtractor\"\n    shape: hexagon\n    style: {\n      fill: \"#fff8e1\"\n      stroke: \"#ff8f00\"\n      stroke-width: 2\n      border-radius: 4\n      font-size: 14\n    }\n  }\n  sa-type-e7edeebf-13-JavaCallGraphExtractor: {\n    label: \"JavaCallGraphExtractor\"\n    shape: hexagon\n    style: {\n      fill: \"#fff8e1\"\n      stroke: \"#ff8f00\"\n      stroke-width: 2\n      border-radius: 4\n      font-size: 14\n    }\n  }\n  sa-type-f57fc3a5-13-CSharpCallGraphExtractor: {\n    label: \"CSharpCallGraphExtractor\"\n    shape: hexagon\n    style: {\n      fill: \"#fff8e1\"\n      stroke: \"#ff8f00\"\n      stroke-width: 2\n      border-radius: 4\n      font-size: 14\n    }\n  }\n}\n\n\"internal/graph\": {\n  label: \"graph\"\n  style: {\n    fill: \"#f3e5f5\"\n    stroke: \"#6a1b9a\"\n    stroke-width: 2\n    border-radius: 8\n  }\n  sa-type-a918a3cf-8-Graph: {\n    label: \"Graph\"\n    shape: hexagon\n    style: {\n      fill: \"#fff8e1\"\n      stroke: \"#ff8f00\"\n      stroke-width: 2\n      border-radius: 4\n      font-size: 14\n    }\n  }\n}\n\n\"internal/mcp\": {\n  label: \"mcp\"\n  style: {\n    fill: \"#f3e5f5\"\n    stroke: \"#6a1b9a\"\n    stroke-width: 2\n    border-radius: 8\n  }\n  sa-type-bd1206cc-28-Server: {\n    label: \"Server\"\n    shape: hexagon\n    style: {\n      fill: \"#fff8e1\"\n      stroke: \"#ff8f00\"\n      stroke-width: 2\n      border-radius: 4\n      font-size: 14\n    }\n  }\n}\n\n\"internal/output\": {\n  label: \"output\"\n  style: {\n    fill: \"#e3f2fd\"\n    stroke: \"#1565c0\"\n    stroke-width: 2\n    border-radius: 8\n  }\n  sa-fn-19f293f2-112-String: {\n    label: \"String\"\n    shape: rectangle\n    style: {\n      fill: \"#fff8e1\"\n      stroke: \"#ff8f00\"\n      stroke-width: 2\n      border-radius: 4\n      font-size: 14\n    }\n  }\n  sa-fn-3f85b170-281-Format: {\n    label: \"Format\"\n    shape: rectangle\n    style: {\n      fill: \"#fff8e1\"\n      stroke: \"#ff8f00\"\n      stroke-width: 2\n      border-radius: 4\n      font-size: 14\n    }\n  }\n  sa-fn-3f85b170-292-FormatToWriter: {\n    label: \"FormatToWriter\"\n    shape: rectangle\n    style: {\n      fill: \"#fff8e1\"\n      stroke: \"#ff8f00\"\n      stroke-width: 2\n      border-radius: 4\n      font-size: 14\n    }\n  }\n  sa-type-19f293f2-71-Density: {\n    label: \"Density\"\n    shape: hexagon\n    style: {\n      fill: \"#fff3e0\"\n      stroke: \"#e65100\"\n      stroke-width: 3\n      border-radius: 4\n      shadow: true\n      font-size: 14\n    }\n  }\n  sa-type-3f85b170-271-CGFFormatter: {\n    label: \"CGFFormatter\"\n    shape: hexagon\n    style: {\n      fill: \"#fff8e1\"\n      stroke: \"#ff8f00\"\n      stroke-width: 2\n      border-radius: 4\n      font-size: 14\n    }\n  }\n  sa-type-6ffd4115-30-CGFWriter: {\n    label: \"CGFWriter\"\n    shape: hexagon\n    style: {\n      fill: \"#fff8e1\"\n      stroke: \"#ff8f00\"\n      stroke-width: 2\n      border-radius: 4\n      font-size: 14\n    }\n  }\n}\n\n\"internal/parser\": {\n  label: \"parser\"\n  style: {\n    fill: \"#e3f2fd\"\n    stroke: \"#1565c0\"\n    stroke-width: 2\n    border-radius: 8\n  }\n  sa-fn-d1655fd7-113-Parse: {\n    label: \"Parse\"\n    shape: rectangle\n    style: {\n      fill: \"#fff8e1\"\n      stroke: \"#ff8f00\"\n      stroke-width: 2\n      border-radius: 4\n      font-size: 14\n    }\n  }\n  sa-fn-d1655fd7-189-walkNode: {\n    label: \"walkNode\"\n    shape: rectangle\n    style: {\n      fill: \"#fff3e0\"\n      stroke: \"#e65100\"\n      stroke-width: 3\n      border-radius: 4\n      shadow: true\n      font-size: 14\n    }\n  }\n  sa-fn-d1655fd7-202-FindNodes: {\n    label: \"FindNodes\"\n    shape: rectangle\n    style: {\n      fill: \"#e3f2fd\"\n      stroke: \"#1976d2\"\n      stroke-width: 1\n      border-radius: 4\n      font-size: 14\n    }\n  }\n  sa-fn-d1655fd7-214-FindNodesByType: {\n    label: \"FindNodesByType\"\n    shape: rectangle\n    style: {\n      fill: \"#fff8e1\"\n      stroke: \"#ff8f00\"\n      stroke-width: 2\n      border-radius: 4\n      font-size: 14\n    }\n  }\n  sa-fn-d1655fd7-221-NodeText: {\n    label: \"NodeText\"\n    shape: rectangle\n    style: {\n      fill: \"#fff3e0\"\n      stroke: \"#e65100\"\n      stroke-width: 3\n      border-radius: 4\n      shadow: true\n      font-size: 14\n    }\n  }\n  sa-fn-df240028-39-Error: {\n    label: \"Error\"\n    shape: rectangle\n    style: {\n      fill: \"#fff8e1\"\n      stroke: \"#ff8f00\"\n      stroke-width: 2\n      border-radius: 4\n      font-size: 14\n    }\n  }\n  sa-type-d1655fd7-52-ParseResult: {\n    label: \"ParseResult\"\n    shape: hexagon\n    style: {\n      fill: \"#fff3e0\"\n      stroke: \"#e65100\"\n      stroke-width: 3\n      border-radius: 4\n      shadow: true\n      font-size: 14\n    }\n  }\n  sa-type-df240028-33-FileReadError: {\n    label: \"FileReadError\"\n    shape: hexagon\n    style: {\n      fill: \"#f3e5f5\"\n      stroke: \"#7b1fa2\"\n      stroke-width: 1\n      border-radius: 4\n      font-size: 14\n    }\n  }\n}\n\n\"internal/store\": {\n  label: \"store\"\n  style: {\n    fill: \"#eceff1\"\n    stroke: \"#455a64\"\n    stroke-width: 2\n    border-radius: 8\n  }\n  sa-fn-54bbffe9-25-Open: {\n    label: \"Open\"\n    shape: rectangle\n    style: {\n      fill: \"#fff8e1\"\n      stroke: \"#ff8f00\"\n      stroke-width: 2\n      border-radius: 4\n      font-size: 14\n    }\n  }\n  sa-fn-54bbffe9-84-Close: {\n    label: \"Close\"\n    shape: rectangle\n    style: {\n      fill: \"#fff3e0\"\n      stroke: \"#e65100\"\n      stroke-width: 3\n      border-radius: 4\n      shadow: true\n      font-size: 14\n    }\n  }\n  sa-fn-54bbffe9-92-DB: {\n    label: \"DB\"\n    shape: rectangle\n    style: {\n      fill: \"#fff8e1\"\n      stroke: \"#ff8f00\"\n      stroke-width: 2\n      border-radius: 4\n      font-size: 14\n    }\n  }\n  sa-type-54bbffe9-17-Store: {\n    label: \"Store\"\n    shape: hexagon\n    style: {\n      fill: \"#fff3e0\"\n      stroke: \"#e65100\"\n      stroke-width: 3\n      border-radius: 4\n      shadow: true\n      font-size: 14\n    }\n  }\n  sa-type-bf4da8db-6-Entity: {\n    label: \"Entity\"\n    shape: hexagon\n    style: {\n      fill: \"#fff3e0\"\n      stroke: \"#e65100\"\n      stroke-width: 3\n      border-radius: 4\n      shadow: true\n      font-size: 14\n    }\n  }\n}\n\n\n# Flow Connections\n\"internal/parser\".sa-fn-d1655fd7-189-walkNode -> \"internal/parser\".sa-fn-d1655fd7-189-walkNode {\n  style: {\n    stroke: \"#424242\"\n    stroke-width: 1\n  }\n}\n\"internal/extract\".sa-fn-71e0bf00-1227-nodeText -> \"internal/parser\".sa-fn-d1655fd7-221-NodeText {\n  style: {\n    stroke: \"#424242\"\n    stroke-width: 1\n  }\n}\n\"internal/extract\".sa-fn-71e0bf00-1227-nodeText -> \"internal/parser\".sa-fn-d1655fd7-221-NodeText {\n  style: {\n    stroke: \"#757575\"\n    stroke-width: 1\n    stroke-dash: 3\n  }\n}\n\"internal/extract\".sa-fn-71e0bf00-1227-nodeText -> \"internal/extract\".sa-type-71e0bf00-12-TypeScriptExtractor {\n  style: {\n    stroke: \"#757575\"\n    stroke-width: 1\n  }\n}\n\"internal/extract\".sa-fn-71e0bf00-1227-nodeText -> \"internal/extract\".sa-type-71e0bf00-12-TypeScriptExtractor {\n  style: {\n    stroke: \"#757575\"\n    stroke-width: 1\n    stroke-dash: 3\n  }\n}\n\"internal/store\".sa-fn-54bbffe9-84-Close -> \"internal/store\".sa-fn-54bbffe9-84-Close {\n  style: {\n    stroke: \"#424242\"\n    stroke-width: 1\n  }\n}\n\"internal/store\".sa-fn-54bbffe9-84-Close -> \"internal/store\".sa-fn-54bbffe9-84-Close {\n  style: {\n    stroke: \"#757575\"\n    stroke-width: 1\n    stroke-dash: 3\n  }\n}\n\"internal/store\".sa-fn-54bbffe9-84-Close -> \"internal/store\".sa-type-54bbffe9-17-Store {\n  style: {\n    stroke: \"#757575\"\n    stroke-width: 1\n  }\n}\n\"internal/store\".sa-fn-54bbffe9-84-Close -> \"internal/store\".sa-type-54bbffe9-17-Store {\n  style: {\n    stroke: \"#757575\"\n    stroke-width: 1\n    stroke-dash: 3\n  }\n}\n\"internal/parser\".sa-fn-d1655fd7-221-NodeText -> \"internal/parser\".sa-type-d1655fd7-52-ParseResult {\n  style: {\n    stroke: \"#757575\"\n    stroke-width: 1\n  }\n}\n\"internal/parser\".sa-fn-d1655fd7-221-NodeText -> \"internal/parser\".sa-type-d1655fd7-52-ParseResult {\n  style: {\n    stroke: \"#757575\"\n    stroke-width: 1\n    stroke-dash: 3\n  }\n}\n\"internal/daemon\".sa-fn-89d04249-115-Client -> \"internal/daemon\".sa-fn-89d04249-115-Client {\n  style: {\n    stroke: \"#757575\"\n    stroke-width: 1\n    stroke-dash: 3\n  }\n}\n\"internal/daemon\".sa-fn-89d04249-115-Client -> \"internal/daemon\".sa-type-89d04249-15-StoreProvider {\n  style: {\n    stroke: \"#757575\"\n    stroke-width: 1\n  }\n}\n\"internal/daemon\".sa-fn-89d04249-115-Client -> \"internal/daemon\".sa-type-89d04249-15-StoreProvider {\n  style: {\n    stroke: \"#757575\"\n    stroke-width: 1\n    stroke-dash: 3\n  }\n}\n\"internal/output\".sa-fn-19f293f2-112-String -> \"internal/output\".sa-type-19f293f2-71-Density {\n  style: {\n    stroke: \"#757575\"\n    stroke-width: 1\n  }\n}\n\"internal/output\".sa-fn-19f293f2-112-String -> \"internal/output\".sa-type-19f293f2-71-Density {\n  style: {\n    stroke: \"#757575\"\n    stroke-width: 1\n    stroke-dash: 3\n  }\n}\n\"internal/extract\".sa-fn-e7edeebf-764-itoa -> \"internal/extract\".sa-fn-e7edeebf-764-itoa {\n  style: {\n    stroke: \"#424242\"\n    stroke-width: 1\n  }\n}\n\"internal/parser\".sa-fn-d1655fd7-214-FindNodesByType -> \"internal/parser\".sa-fn-d1655fd7-202-FindNodes {\n  style: {\n    stroke: \"#424242\"\n    stroke-width: 1\n  }\n}\n\"internal/parser\".sa-fn-d1655fd7-214-FindNodesByType -> \"internal/parser\".sa-fn-d1655fd7-202-FindNodes {\n  style: {\n    stroke: \"#757575\"\n    stroke-width: 1\n    stroke-dash: 3\n  }\n}\n\"internal/parser\".sa-fn-d1655fd7-214-FindNodesByType -> \"internal/parser\".sa-type-d1655fd7-52-ParseResult {\n  style: {\n    stroke: \"#757575\"\n    stroke-width: 1\n  }\n}\n\"internal/parser\".sa-fn-d1655fd7-214-FindNodesByType -> \"internal/parser\".sa-type-d1655fd7-52-ParseResult {\n  style: {\n    stroke: \"#757575\"\n    stroke-width: 1\n    stroke-dash: 3\n  }\n}\n\"internal/output\".sa-fn-3f85b170-281-Format -> \"internal/output\".sa-fn-19f293f2-112-String {\n  style: {\n    stroke: \"#424242\"\n    stroke-width: 1\n  }\n}\n\"internal/output\".sa-fn-3f85b170-281-Format -> \"internal/output\".sa-fn-19f293f2-112-String {\n  style: {\n    stroke: \"#757575\"\n    stroke-width: 1\n    stroke-dash: 3\n  }\n}\n\"internal/output\".sa-fn-3f85b170-281-Format -> \"internal/output\".sa-fn-3f85b170-292-FormatToWriter {\n  style: {\n    stroke: \"#424242\"\n    stroke-width: 1\n  }\n}\n\"internal/output\".sa-fn-3f85b170-281-Format -> \"internal/output\".sa-fn-3f85b170-292-FormatToWriter {\n  style: {\n    stroke: \"#757575\"\n    stroke-width: 1\n    stroke-dash: 3\n  }\n}\n\"internal/output\".sa-fn-3f85b170-281-Format -> \"internal/output\".sa-type-19f293f2-71-Density {\n  style: {\n    stroke: \"#757575\"\n    stroke-width: 1\n    stroke-dash: 3\n  }\n}\n\"internal/output\".sa-fn-3f85b170-281-Format -> \"internal/output\".sa-type-3f85b170-271-CGFFormatter {\n  style: {\n    stroke: \"#757575\"\n    stroke-width: 1\n  }\n}\n\"internal/output\".sa-fn-3f85b170-281-Format -> \"internal/output\".sa-type-3f85b170-271-CGFFormatter {\n  style: {\n    stroke: \"#757575\"\n    stroke-width: 1\n    stroke-dash: 3\n  }\n}\n\"internal/parser\".sa-fn-d1655fd7-113-Parse -> \"internal/parser\".sa-fn-df240028-39-Error {\n  style: {\n    stroke: \"#424242\"\n    stroke-width: 1\n  }\n}\n\"internal/parser\".sa-fn-d1655fd7-113-Parse -> \"internal/parser\".sa-fn-df240028-39-Error {\n  style: {\n    stroke: \"#757575\"\n    stroke-width: 1\n    stroke-dash: 3\n  }\n}\n\"internal/parser\".sa-fn-d1655fd7-113-Parse -> \"internal/parser\".sa-type-d1655fd7-52-ParseResult {\n  style: {\n    stroke: \"#757575\"\n    stroke-width: 1\n    stroke-dash: 3\n  }\n}\n\"internal/extract\".sa-fn-71e0bf00-1216-getFilePath -> \"internal/extract\".sa-fn-836fe4f1-534-NormalizePath {\n  style: {\n    stroke: \"#424242\"\n    stroke-width: 1\n  }\n}\n\"internal/extract\".sa-fn-71e0bf00-1216-getFilePath -> \"internal/extract\".sa-type-71e0bf00-12-TypeScriptExtractor {\n  style: {\n    stroke: \"#757575\"\n    stroke-width: 1\n  }\n}\n\"internal/extract\".sa-fn-71e0bf00-1216-getFilePath -> \"internal/extract\".sa-type-71e0bf00-12-TypeScriptExtractor {\n  style: {\n    stroke: \"#757575\"\n    stroke-width: 1\n    stroke-dash: 3\n  }\n}\n\"internal/extract\".sa-fn-836fe4f1-434-ComputeHashes -> \"internal/store\".sa-type-bf4da8db-6-Entity {\n  style: {\n    stroke: \"#757575\"\n    stroke-width: 1\n  }\n}\n\"internal/extract\".sa-fn-836fe4f1-434-ComputeHashes -> \"internal/store\".sa-type-bf4da8db-6-Entity {\n  style: {\n    stroke: \"#757575\"\n    stroke-width: 1\n    stroke-dash: 3\n  }\n}\n\"internal/bd\".sa-fn-898f819e-34-execBD -> \"internal/output\".sa-fn-19f293f2-112-String {\n  style: {\n    stroke: \"#424242\"\n    stroke-width: 1\n  }\n}\n\"internal/bd\".sa-fn-898f819e-34-execBD -> \"internal/output\".sa-fn-19f293f2-112-String {\n  style: {\n    stroke: \"#757575\"\n    stroke-width: 1\n    stroke-dash: 3\n  }\n}\n\"internal/bd\".sa-fn-898f819e-34-execBD -> \"internal/daemon\".sa-fn-89d04249-115-Client {\n  style: {\n    stroke: \"#757575\"\n    stroke-width: 1\n  }\n}\n\"internal/bd\".sa-fn-898f819e-34-execBD -> \"internal/daemon\".sa-fn-89d04249-115-Client {\n  style: {\n    stroke: \"#757575\"\n    stroke-width: 1\n    stroke-dash: 3\n  }\n}\n\"internal/store\".sa-fn-54bbffe9-92-DB -> \"internal/store\".sa-fn-54bbffe9-92-DB {\n  style: {\n    stroke: \"#757575\"\n    stroke-width: 1\n    stroke-dash: 3\n  }\n}\n\"internal/store\".sa-fn-54bbffe9-92-DB -> \"internal/store\".sa-type-54bbffe9-17-Store {\n  style: {\n    stroke: \"#757575\"\n    stroke-width: 1\n  }\n}\n\"internal/store\".sa-fn-54bbffe9-92-DB -> \"internal/store\".sa-type-54bbffe9-17-Store {\n  style: {\n    stroke: \"#757575\"\n    stroke-width: 1\n    stroke-dash: 3\n  }\n}\n\"internal/daemon\".sa-fn-1ae3e12f-300-Query -> \"internal/daemon\".sa-fn-89d04249-115-Client {\n  style: {\n    stroke: \"#757575\"\n    stroke-width: 1\n  }\n}\n\"internal/daemon\".sa-fn-1ae3e12f-300-Query -> \"internal/daemon\".sa-fn-89d04249-115-Client {\n  style: {\n    stroke: \"#757575\"\n    stroke-width: 1\n    stroke-dash: 3\n  }\n}\n\"internal/extract\".sa-fn-0ba4e74f-315-abbreviateType -> \"internal/extract\".sa-fn-0ba4e74f-315-abbreviateType {\n  style: {\n    stroke: \"#424242\"\n    stroke-width: 1\n  }\n}\n\"internal/cmd\".sa-fn-4a72a17f-78-Execute -> \"internal/cmd\".sa-fn-4a72a17f-78-Execute {\n  style: {\n    stroke: \"#424242\"\n    stroke-width: 1\n  }\n}\n\"internal/cmd\".sa-fn-4a72a17f-78-Execute -> \"internal/cmd\".sa-fn-4a72a17f-78-Execute {\n  style: {\n    stroke: \"#757575\"\n    stroke-width: 1\n    stroke-dash: 3\n  }\n}\n\"internal/parser\".sa-fn-d1655fd7-202-FindNodes -> \"internal/parser\".sa-type-d1655fd7-52-ParseResult {\n  style: {\n    stroke: \"#757575\"\n    stroke-width: 1\n  }\n}\n\"internal/parser\".sa-fn-d1655fd7-202-FindNodes -> \"internal/parser\".sa-type-d1655fd7-52-ParseResult {\n  style: {\n    stroke: \"#757575\"\n    stroke-width: 1\n    stroke-dash: 3\n  }\n}\n\"internal/store\".sa-fn-54bbffe9-25-Open -> \"internal/store\".sa-fn-54bbffe9-25-Open {\n  style: {\n    stroke: \"#424242\"\n    stroke-width: 1\n  }\n}\n\"internal/store\".sa-fn-54bbffe9-25-Open -> \"internal/store\".sa-fn-54bbffe9-25-Open {\n  style: {\n    stroke: \"#757575\"\n    stroke-width: 1\n    stroke-dash: 3\n  }\n}\n\"internal/store\".sa-fn-54bbffe9-25-Open -> \"internal/store\".sa-fn-54bbffe9-84-Close {\n  style: {\n    stroke: \"#424242\"\n    stroke-width: 1\n  }\n}\n\"internal/store\".sa-fn-54bbffe9-25-Open -> \"internal/store\".sa-fn-54bbffe9-84-Close {\n  style: {\n    stroke: \"#757575\"\n    stroke-width: 1\n    stroke-dash: 3\n  }\n}\n\"internal/store\".sa-fn-54bbffe9-25-Open -> \"internal/store\".sa-type-54bbffe9-17-Store {\n  style: {\n    stroke: \"#757575\"\n    stroke-width: 1\n    stroke-dash: 3\n  }\n}\n\"internal/output\".sa-fn-3f85b170-292-FormatToWriter -> \"internal/output\".sa-type-19f293f2-71-Density {\n  style: {\n    stroke: \"#757575\"\n    stroke-width: 1\n    stroke-dash: 3\n  }\n}\n\"internal/output\".sa-fn-3f85b170-292-FormatToWriter -> \"internal/output\".sa-type-3f85b170-271-CGFFormatter {\n  style: {\n    stroke: \"#757575\"\n    stroke-width: 1\n  }\n}\n\"internal/output\".sa-fn-3f85b170-292-FormatToWriter -> \"internal/output\".sa-type-3f85b170-271-CGFFormatter {\n  style: {\n    stroke: \"#757575\"\n    stroke-width: 1\n    stroke-dash: 3\n  }\n}\n\"internal/extract\".sa-fn-9763a4f7-890-phpItoa -> \"internal/extract\".sa-fn-9763a4f7-890-phpItoa {\n  style: {\n    stroke: \"#424242\"\n    stroke-width: 1\n  }\n}\n\"internal/parser\".sa-fn-df240028-39-Error -> \"internal/parser\".sa-type-df240028-33-FileReadError {\n  style: {\n    stroke: \"#757575\"\n    stroke-width: 1\n  }\n}\n\"internal/parser\".sa-fn-df240028-39-Error -> \"internal/parser\".sa-type-df240028-33-FileReadError {\n  style: {\n    stroke: \"#757575\"\n    stroke-width: 1\n    stroke-dash: 3\n  }\n}\n\"internal/extract\".sa-fn-e4194d0c-677-resolveTarget -> \"internal/extract\".sa-const-26106598-34-Contains {\n  style: {\n    stroke: \"#424242\"\n    stroke-width: 1\n  }\n}\n\"internal/extract\".sa-fn-e4194d0c-677-resolveTarget -> \"internal/extract\".sa-const-26106598-34-Contains {\n  style: {\n    stroke: \"#757575\"\n    stroke-width: 1\n    stroke-dash: 3\n  }\n}\n\"internal/extract\".sa-fn-e4194d0c-677-resolveTarget -> \"internal/extract\".sa-type-26106598-67-CallGraphEntity {\n  style: {\n    stroke: \"#757575\"\n    stroke-width: 1\n    stroke-dash: 3\n  }\n}\n\"internal/extract\".sa-fn-e4194d0c-677-resolveTarget -> \"internal/extract\".sa-type-e4194d0c-15-TypeScriptCallGraphExtractor {\n  style: {\n    stroke: \"#757575\"\n    stroke-width: 1\n  }\n}\n\"internal/extract\".sa-fn-e4194d0c-677-resolveTarget -> \"internal/extract\".sa-type-e4194d0c-15-TypeScriptCallGraphExtractor {\n  style: {\n    stroke: \"#757575\"\n    stroke-width: 1\n    stroke-dash: 3\n  }\n}\n"
    }
  },
  "health": {
    "coverage_overall": 0,
    "untested_keystones": 50,
    "circular_dependencies": 0,
    "dead_code_candidates": 0
  },
  "playground": {
    "enabled": true,
    "layers": [
      {
        "id": "core",
        "label": "Core",
        "color": "#4a90d9",
        "entity_count": 2136,
        "default_visible": true
      },
      {
        "id": "api",
        "label": "Api",
        "color": "#50c878",
        "entity_count": 881,
        "default_visible": true
      },
      {
        "id": "store",
        "label": "Store",
        "color": "#9b59b6",
        "entity_count": 238,
        "default_visible": true
      },
      {
        "id": "output",
        "label": "Output",
        "color": "#f39c12",
        "entity_count": 206,
        "default_visible": true
      },
      {
        "id": "parser",
        "label": "Parser",
        "color": "#e67e22",
        "entity_count": 122,
        "default_visible": true
      },
      {
        "id": "graph",
        "label": "Graph",
        "color": "#1abc9c",
        "entity_count": 103,
        "default_visible": true
      }
    ],
    "connection_types": [
      {
        "type": "calls",
        "label": "Calls",
        "color": "#3498db",
        "count": 0,
        "default_visible": true
      },
      {
        "type": "uses_type",
        "label": "Uses Type",
        "color": "#2ecc71",
        "count": 0,
        "default_visible": true
      },
      {
        "type": "implements",
        "label": "Implements",
        "color": "#9b59b6",
        "count": 0,
        "default_visible": true
      },
      {
        "type": "extends",
        "label": "Extends",
        "color": "#e74c3c",
        "count": 0,
        "default_visible": true
      },
      {
        "type": "imports",
        "label": "Imports",
        "color": "#95a5a6",
        "count": 0,
        "default_visible": false
      }
    ],
    "element_map": {
      "sa-const-26106598-34-Contains": "node-Contains",
      "sa-fn-3f85b170-281-Format": "node-Format",
      "sa-fn-19f293f2-112-String": "node-String",
      "sa-fn-54bbffe9-84-Close": "node-Close",
      "sa-fn-71e0bf00-1227-nodeText": "node-nodeText",
      "sa-fn-89d04249-115-Client": "node-Client",
      "sa-fn-d1655fd7-113-Parse": "node-Parse",
      "sa-fn-d1655fd7-189-walkNode": "node-walkNode",
      "sa-fn-d1655fd7-214-FindNodesByType": "node-FindNodesByType",
      "sa-fn-d1655fd7-221-NodeText": "node-NodeText",
      "sa-fn-e7edeebf-764-itoa": "node-itoa",
      "sa-type-6ffd4115-30-CGFWriter": "node-CGFWriter",
      "sa-type-19f293f2-71-Density": "node-Density",
      "sa-type-54bbffe9-17-Store": "node-Store",
      "sa-type-71e0bf00-12-TypeScriptExtractor": "node-TypeScriptExtractor",
      "sa-type-89d04249-15-StoreProvider": "node-StoreProvider",
      "sa-type-a918a3cf-8-Graph": "node-Graph",
      "sa-type-bf4da8db-6-Entity": "node-Entity",
      "sa-type-d1655fd7-52-ParseResult": "node-ParseResult",
      "sa-type-e4194d0c-15-TypeScriptCallGraphExtractor": "node-TypeScriptCallGraphExtractor"
    },
    "view_presets": [
      {
        "id": "full",
        "label": "Full System",
        "description": "Show all layers and connections",
        "visible_layers": [
          "core",
          "api",
          "store",
          "parser",
          "graph",
          "output"
        ],
        "visible_connections": [
          "calls",
          "uses_type",
          "implements"
        ]
      },
      {
        "id": "keystones",
        "label": "Keystones Only",
        "description": "Show only keystone entities and their connections",
        "visible_layers": [
          "core",
          "api",
          "store",
          "parser",
          "graph",
          "output"
        ],
        "visible_connections": [
          "calls",
          "uses_type"
        ],
        "importance_filter": [
          "keystone"
        ]
      },
      {
        "id": "core",
        "label": "Core Architecture",
        "description": "Focus on core, store, and parser modules",
        "visible_layers": [
          "core",
          "store",
          "parser"
        ],
        "visible_connections": [
          "calls",
          "uses_type"
        ]
      },
      {
        "id": "api",
        "label": "API Layer",
        "description": "Focus on API and output modules",
        "visible_layers": [
          "api",
          "output"
        ],
        "visible_connections": [
          "calls"
        ]
      }
    ]
  }
}
;
    const state = { layers: {}, connections: {}, comments: [], selectedEntity: null };
    
    window.onload = function() {
      initLayers(); initConnections(); initPresets(); renderKeystones(); generatePrompt();
    };
    
    function initLayers() {
      const container = document.getElementById('layers');
      if (!reportData.playground?.layers) return;
      reportData.playground.layers.forEach(layer => {
        state.layers[layer.id] = layer.default_visible;
        const item = document.createElement('label');
        item.className = 'toggle-item';
        item.innerHTML = '<input type="checkbox" '+(layer.default_visible?'checked':'')+' onchange="toggleLayer(\''+layer.id+'\')"><span class="toggle-color" style="background:'+layer.color+'"></span><span class="toggle-label">'+layer.label+'</span><span class="toggle-count">'+layer.entity_count+'</span>';
        container.appendChild(item);
      });
    }
    
    function initConnections() {
      const container = document.getElementById('connections');
      if (!reportData.playground?.connection_types) return;
      reportData.playground.connection_types.forEach(conn => {
        state.connections[conn.type] = conn.default_visible;
        const item = document.createElement('label');
        item.className = 'toggle-item';
        item.innerHTML = '<input type="checkbox" '+(conn.default_visible?'checked':'')+' onchange="toggleConnection(\''+conn.type+'\')"><span class="toggle-color" style="background:'+conn.color+'"></span><span class="toggle-label">'+conn.label+'</span>';
        container.appendChild(item);
      });
    }
    
    function initPresets() {
      const container = document.getElementById('presets');
      if (!reportData.playground?.view_presets) return;
      reportData.playground.view_presets.forEach(preset => {
        const btn = document.createElement('button');
        btn.className = 'preset-btn';
        btn.textContent = preset.label;
        btn.onclick = () => applyPreset(preset);
        container.appendChild(btn);
      });
    }
    
    function renderKeystones() {
      const container = document.getElementById('keystones-list');
      container.innerHTML = '';
      const keystones = reportData.keystones || [];
      document.getElementById('total-entities').textContent = keystones.length;
      let visible = 0;
      keystones.forEach(entity => {
        if (entity.layer && state.layers[entity.layer] === false) return;
        visible++;
        const card = document.createElement('div');
        card.className = 'keystone-card';
        card.onclick = () => selectEntity(entity, card);
        card.innerHTML = '<div class="keystone-name">'+entity.name+'</div><div class="keystone-meta"><span class="keystone-badge '+(entity.entity_type||'')+'">'+entity.entity_type+'</span><span class="keystone-badge '+(entity.importance||'')+'">'+entity.importance+'</span><span class="keystone-badge">'+entity.layer+'</span><span class="keystone-badge">PR: '+(entity.pagerank?.toFixed(4)||'N/A')+'</span></div>';
        container.appendChild(card);
      });
      document.getElementById('visible-entities').textContent = visible;
    }
    
    function selectEntity(entity, cardEl) {
      document.querySelectorAll('.keystone-card').forEach(c => c.classList.remove('selected'));
      cardEl.classList.add('selected');
      state.selectedEntity = entity;
      document.getElementById('panel-entity-name').textContent = entity.name;
      document.getElementById('entity-details').innerHTML = '<div class="detail-item"><div class="detail-label">Type</div><div class="detail-value">'+entity.entity_type+'</div></div><div class="detail-item"><div class="detail-label">File</div><div class="detail-value"><code>'+entity.file+'</code></div></div><div class="detail-item"><div class="detail-label">Lines</div><div class="detail-value">'+(entity.lines?entity.lines.join('-'):'N/A')+'</div></div><div class="detail-item"><div class="detail-label">Importance</div><div class="detail-value">'+entity.importance+'</div></div><div class="detail-item"><div class="detail-label">PageRank</div><div class="detail-value">'+(entity.pagerank?.toFixed(6)||'N/A')+'</div></div><div class="detail-item"><div class="detail-label">In-Degree</div><div class="detail-value">'+(entity.in_degree||0)+'</div></div><div class="detail-item"><div class="detail-label">Signature</div><div class="detail-value"><code>'+(entity.signature||'N/A')+'</code></div></div>';
      document.getElementById('entity-panel').classList.add('visible');
    }
    
    function closePanel() { document.getElementById('entity-panel').classList.remove('visible'); state.selectedEntity = null; }
    function toggleLayer(id) { state.layers[id] = !state.layers[id]; renderKeystones(); generatePrompt(); }
    function toggleConnection(type) { state.connections[type] = !state.connections[type]; generatePrompt(); }
    function applyPreset(preset) {
      if (preset.visible_layers) {
        Object.keys(state.layers).forEach(l => state.layers[l] = false);
        preset.visible_layers.forEach(l => state.layers[l] = true);
        document.querySelectorAll('#layers input').forEach((cb,i) => { cb.checked = state.layers[reportData.playground.layers[i].id]; });
      }
      renderKeystones(); generatePrompt();
    }
    function handleSearch() {
      const q = document.getElementById('search').value.toLowerCase();
      let visible = 0;
      document.querySelectorAll('.keystone-card').forEach(card => {
        const show = card.querySelector('.keystone-name').textContent.toLowerCase().includes(q);
        card.style.display = show ? '' : 'none';
        if (show) visible++;
      });
      document.getElementById('visible-entities').textContent = visible;
    }
    function addComment() {
      if (!state.selectedEntity) return;
      const text = prompt('Add comment for '+state.selectedEntity.name+':');
      if (text) { state.comments.push({ entity: state.selectedEntity.name, file: state.selectedEntity.file, text: text }); generatePrompt(); }
    }
    function generatePrompt() {
      const visibleLayers = Object.entries(state.layers).filter(([,v])=>v).map(([k])=>k);
      let p = '# Cortex Codebase Analysis\n\n## Current View\n- **Visible Layers:** '+visibleLayers.join(', ')+'\n- **Total Keystones:** '+(reportData.keystones?.length||0)+'\n- **Generated:** '+(reportData.report?.generated_at||'Unknown')+'\n\n';
      if (state.comments.length > 0) {
        p += '## Comments\n\n';
        state.comments.forEach(c => { p += '### '+c.entity+'\n**File:** '+c.file+'\n'+c.text+'\n\n'; });
      }
      p += '## Top Keystones\n';
      (reportData.keystones||[]).slice(0,5).forEach(k => { p += '- **'+k.name+'** ('+k.entity_type+') - PR: '+(k.pagerank?.toFixed(4))+', In-Degree: '+k.in_degree+'\n'; });
      document.getElementById('prompt-output').value = p;
    }
    function copyPrompt() {
      const t = document.getElementById('prompt-output');
      t.select(); document.execCommand('copy');
      const btn = event.target; const orig = btn.textContent;
      btn.textContent = '‚úì Copied!'; setTimeout(() => btn.textContent = orig, 2000);
    }
  </script>
</body>
</html>